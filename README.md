# smart-home-3d

### 项目名称
基于Web3D的智能家居控制平台

### 项目内容
* 运用Three.js与PhoneGap技术实现了移动端的智能家居平台，将家居状态和家居环境状态（温度、湿度等）以3D形式进行展示，并允许用户通过手势交互来进行控制；
* 实现移动端与PC端的控制互联：移动端控制家居操作，PC端模拟真实家居环境的反馈，而PC端修改的环境参数也会实时反映到移动端；
* 实现神经网络功能原型，可通过环境参数（温度、湿度、噪声、照度、时间等）推断家居状态。

### 代码说明
* mobile文件夹：移动端代码。在电脑与手机上分别下载PhoneGap Developer软件。新建项目后，将mobile文件夹下的文件放到新建项目的www文件夹下。在电脑端运行该项目后，即可通过手机的PhoneGap Developer在手机上访问该项目。
* PC文件夹：PC端代码。复制一份mobile文件夹下的文件，并用PC文件夹下的文件替换index.html、js及css文件夹，即是完整的PC端代码。将完整的PC端代码放在服务器下运行即可。
* Server文件夹：服务器端代码。运行时需要配置NodeJS及SocketIO环境。如需运行python代码启用神经网络推理功能，还需在配置神经网络框架keras的环境。在命令行下通过node server.js运行。
* NN文件夹：神经网络训练代码及模拟训练集数据。如需改进神经网络功能，可参照Training Data.xlsx文件with behavior表格中输入和输出的格式自行生成数据集进行训练。

### 注意事项
* 该项目目前只支持局域网环境下运行，并需要在Server/server.js中设置监听端口、并分别在PC/js/control.js及mobile/js/control.js中设置socket连接地址。目前设置服务器监听端口为8000，socket连接地址为http://192.168.0.100:8000。
* 由于训练数据不够多样等原因，该项目目前完成的神经网络功能还非常不完善，因此默认不启用。如需启用，需在server.js中去除相应代码的注释。

Updated 04/12/2017

***

配置步骤：
 
下载PhoneGap电脑端

create new PhoneGap project

将此项目的mobile目录放在www文件夹下

在PhoneGap界面启动项目后，即可通过下方显示的地址在网页／手机端APP访问


目前：

导入obj及带贴图的mtl文件

根据环境设置灯光（窗户光线&灯光）（窗户光线可留待接入天气API)

粒子系统表示室内温度湿度等情况

点击button/双击屏幕的背景色切换（之后可改成灯光控制，功能PC端ok但是手机端有bug待fix）
